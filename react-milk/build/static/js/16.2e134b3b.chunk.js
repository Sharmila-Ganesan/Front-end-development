(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[16],{103:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(2),r=a(4);function c(e){return Object(r.a)(n.I,"get","pstatement",e,"query")}},158:function(e,t,a){"use strict";a.r(t);var n=a(27),r=a(12),c=a(13),l=a(20),o=a(15),u=a(14),i=a(0),s=a.n(i),d=a(19),m=a(103),h=a(99),f=a(85),p=a(91),b=a(23),g=a(32),y=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={details:[],data:[],startDate:Object(p.d)(new Date,"date"),endDate:Object(p.d)(new Date,"date"),role:"",salesman:"",customer:"",totalAmount:0,totalQuantity:0,branchcode:"",saleTime:"",isAllSelected:!1,selectedIds:[]},n.handleClick=n.handleClick.bind(Object(l.a)(n)),n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.filterRecord=n.filterRecord.bind(Object(l.a)(n)),n.handleSelectItems=n.handleSelectItems.bind(Object(l.a)(n)),n.deleteSales=n.deleteSales.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.userData.users.userInfo.role;e.from||(Object(f.c)(this.props),Object(f.j)(this.props)),this.setState({role:t}),this.props.dispatch(Object(m.a)())}},{key:"handleChange",value:function(e,t){var a=e.target.value,r=this.state,c=r.startDate,l=r.endDate,o=r.details,u=r.salesman,i=r.customer,s=r.data,d=r.totalAmount,m=r.totalQuantity,h=r.cumtotal,f=r.cumquantity,b=r.branchcode;switch(t){case"start":c=a;break;case"end":l=a;break;case"salesman":if(u=a,a){var g=Object(p.h)(s,"salesmanId",a),y=Object(n.a)(g,3),v=y[0];d=y[1],m=y[2],o=v}else o=s,d=h,m=f;break;case"customer":if(i=a,a){var E=Object(p.h)(s,"customerId",a),j=Object(n.a)(E,3),S=j[0];d=j[1],m=j[2],o=S}else o=s,d=h,m=f;break;case"branch":if(b=a,a){var C=Object(p.h)(s,"branchcode",a),O=Object(n.a)(C,3),I=O[0];d=O[1],m=O[2],o=I}else o=s,d=h,m=f}this.setState({startDate:c,endDate:l,salesman:u,customer:i,details:o,totalAmount:d,totalQuantity:m,branchcode:b})}},{key:"handleClick",value:function(){var e=this.state,t={startDate:e.startDate,endDate:e.endDate};this.props.dispatch(Object(m.a)(t))}},{key:"filterRecord",value:function(e){var t=this.state,a=t.data,n=t.details,r=t.totalQuantity,c=t.totalAmount,l=t.saleTime,o=t.cumquantity,u=t.cumtotal,i=e.target.value;l=i,n=[],i?(c=0,r=0,a.forEach((function(e){n.push(e);var t=new Date(e.Date).getHours();"AM"===i&&t<12?(c+=parseInt(e.price),r+=parseInt(e.quantity)):"PM"===i&&t>=12&&(n.push(e),c+=parseInt(e.price),r+=parseInt(e.quantity))}))):(c=u,r=o,n=a),this.setState({details:n,totalAmount:c,totalQuantity:r,saleTime:l})}},{key:"handleSelectItems",value:function(e){var t=this.state,a=t.details,n=t.isAllSelected,r=t.selectedIds;if(r||(r=[]),e>-1){var c=a[e];c.isSelected?r=r.filter((function(e){return e!==c._id})):r.push(c._id),a[e].isSelected=!a[e].isSelected}else n=!n,r=a.map((function(e,t){return a[t].isSelected=n,e._id})),n||(r=[]);n=r.length===a.length,this.setState({isAllSelected:n,details:a,selectedIds:r})}},{key:"deleteSales",value:function(){var e=this.state.selectedIds;this.props.dispatch(Object(h.b)({transactionIds:e})),this.setState({selectedIds:[],isAllSelected:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.details,n=t.startDate,r=t.endDate,c=t.salesman,l=t.customer,o=t.branchcode,u=t.isAllSelected,i=t.selectedIds,d=this.props.from,m=Object(p.d)(new Date,"date");return s.a.createElement("div",{className:"mb-55 "+(d?"col-md-6 col-sm-12":"container-fluid mt-3 ")},s.a.createElement("div",{className:"row m-1"},s.a.createElement("div",{className:"form-group col-md-6 col-sm-12"},s.a.createElement("label",{htmlFor:"fromDate"},"From Date :"),s.a.createElement("input",{type:"date",name:"fromDate",className:"form-control",placeholder:"from date",value:n,onChange:function(t){return e.handleChange(t,"start")},autoComplete:"off",max:m}),s.a.createElement("label",{className:"input-err text-danger"},"")),s.a.createElement("div",{className:"form-group col-md-6 col-sm-12"},s.a.createElement("label",{htmlFor:"toDate"},"To Date :"),s.a.createElement("input",{type:"date",name:"toDate",className:"form-control",placeholder:"To date",value:r,onChange:function(t){return e.handleChange(t,"end")},autoComplete:"off",max:m}),s.a.createElement("label",{className:"input-err text-danger"},"")),s.a.createElement("div",{className:"col-12 d-flex align-items-center justify-content-center"},s.a.createElement("button",{className:" btn btn-primary",onClick:this.handleClick},"Apply"))),s.a.createElement("div",{className:"row m-1"},s.a.createElement("h5",{className:"col-12"},"Filter By"),s.a.createElement("div",{className:"form-group col-6"},s.a.createElement("label",{htmlFor:"salesmanId"},"By Salesman :"),s.a.createElement("input",{type:"number",name:"salesmanId",className:"form-control",placeholder:"SalesmanId",value:c,onChange:function(t){return e.handleChange(t,"salesman")},autoComplete:"off"}),s.a.createElement("label",{className:"input-err text-danger"},"")),s.a.createElement("div",{className:"form-group col-6"},s.a.createElement("label",{htmlFor:"customerId"},"By Customer :"),s.a.createElement("input",{type:"number",name:"customerId",className:"form-control",placeholder:"Customer Id",value:l,onChange:function(t){return e.handleChange(t,"customer")},autoComplete:"off"}),s.a.createElement("label",{className:"input-err text-danger"},"")),s.a.createElement("div",{className:"form-group col-6"},s.a.createElement("label",{htmlFor:"branch"},"By Branch :"),s.a.createElement("input",{type:"text",name:"branch",className:"form-control",placeholder:"Branch",value:o,onChange:function(t){return e.handleChange(t,"branch")},autoComplete:"off"}),s.a.createElement("label",{className:"input-err text-danger"},""))),s.a.createElement("div",{className:"centered-items"},s.a.createElement("button",{className:"btn btn-primary m-2",disabled:0===i.length,onClick:this.deleteSales},"Delete Sales")),s.a.createElement("h5",null,"Sales Table ",i.length," -selected"),s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement("input",{name:"selectall",type:"checkbox",checked:u,onChange:function(){return e.handleSelectItems()}})),s.a.createElement("th",null,"Transaction Id"),s.a.createElement("th",null,"Salesman Id"),s.a.createElement("th",null,"customerId"),s.a.createElement("th",null,"branchcode"),s.a.createElement("th",null,"Date"),s.a.createElement("th",null,"Quantity"),s.a.createElement("th",null,"Price"))),s.a.createElement("tbody",null,a&&a.length>0?a.map((function(t,a){return s.a.createElement("tr",{key:a},s.a.createElement("td",null,s.a.createElement("input",{name:"delcheckbox"+a,type:"checkbox",checked:!!t.isSelected,onChange:function(){return e.handleSelectItems(a)}})),s.a.createElement("td",null,t._id),s.a.createElement("td",null,t.salesmanId),s.a.createElement("td",null,t.customerId?s.a.createElement("a",{title:t.customerId,href:"tel:+91"+t.customerId},t.customerName):""),s.a.createElement("td",null,t.branchcode),s.a.createElement("td",null,Object(p.d)(t.Date)),s.a.createElement("td",null,t.quantity+"ml"),s.a.createElement("td",null,"\u20b9",t.price))})):s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"8"},"No record(s) found")))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.userData,n=a.users.userInfo.role,r=a.transaction,c=r.message,l=r.messageCode,o=a.statement.details;return e.from||(Object(f.h)(e),Object(f.j)(e)),"DS101"===l&&(b.b.success(c),e.dispatch(Object(m.a)()),e.dispatch(Object(g.c)())),JSON.stringify(o)!==JSON.stringify(t.data)?{data:o,details:o,role:n}:{role:n}}}]),a}(s.a.Component);t.default=Object(d.b)((function(e){return{userData:e}}))(y)},85:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"f",(function(){return l})),a.d(t,"i",(function(){return o})),a.d(t,"d",(function(){return u})),a.d(t,"g",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return d})),a.d(t,"c",(function(){return m})),a.d(t,"h",(function(){return h})),a.d(t,"j",(function(){return f}));var n=a(32),r=a(86),c=function(e){return!!((e=e.trim())&&e.length>=3)&&e},l=function(e){return e>0},o=function(e){return!!e},u=function(e,t,a){return!!(e&&e.length>=t&&e.length<=a)},i=function(e){var t=new RegExp("^[6-9][0-9]{9}$");return!(!e||!t.test(e))},s=function(e){var t=new RegExp("^[a-zA-Z0-9_ .]+@[a-zA-Z0-9]+.[a-zA-Z]{2,3}$");return!(!e||!t.test(e))},d=function(e){var t=new RegExp("^[0-9]{1,2}[.][0-9]{5,16}, [0-9]{1,2}[.][0-9]{5,16}$");return!(!e||!t.test(e))},m=function(e){try{if(localStorage.getItem("token"))e.userData.users.token||e.dispatch(Object(n.t)());else e.history.push("/about")}catch(t){}},h=function(e){e.userData.users.token||(localStorage.getItem("token")||e.history.push("/about"))},f=function(e){var t=e.userData.users.userInfo,a=e.match.url,n=[];if(a&&t){var c=a.replace(/\/?\?[a-z=0-9]+/gi,"");if(c=c.replace("/",""),(n=r.b[c])&&n.length>0&&-1!==n.indexOf(t.role))return!0;e.history.push("/home")}}},86:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"j",(function(){return u})),a.d(t,"i",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return d})),a.d(t,"h",(function(){return m})),a.d(t,"k",(function(){return h})),a.d(t,"f",(function(){return f})),a.d(t,"g",(function(){return p})),a.d(t,"e",(function(){return b}));var n={addsale:["salesman"],addwelcome:["salesman"],testsale:["admin"],emptycan:["branchmanager","salesman"],register:["salesman","branchmanager","admin","root"],collectbill:["salesman","branchmanager"],deposit:["salesman","branchmanager"],edit:["branchmanager","admin"],control:["branchmanager","admin","root"],delete:["admin","root"],view:["branchmanager","admin","root"],pending:["branchmanager","admin"],history:["customer","salesman","admin","branchmanager"],home:["customer","salesman","admin","branchmanager","root"],profile:["customer","salesman","admin","branchmanager","root"],statement:["customer","salesman","admin","branchmanager"],pstatement:["customer","salesman","admin","branchmanager"],paybill:["customer","salesman","branchmanager"],generateid:["branchmanager","admin","root"],manageuser:["branchmanager","admin","root"],payout:["admin"],salary:["salesman","branchmanager"],addbranch:["admin"],managebranch:["admin"],viewbranch:["admin"],deletebranch:["admin"],deletesales:["admin"]},r=["January","February","March","April","May","June","July","August","September","October","November","December"],c=40,l=1e3,o=l/c,u=c/l;function i(e){o=(l=1e3)/(c=e),u=c/l}function s(e){if(e&&e<=9999){var t=Math.ceil(e*u);if(t<=499)return t}return""}var d=[{id:"name",title:"Customer Name",type:"text",value:"",default:"",readOnly:!0,placeholder:"Scan QrCode",qrcode:!0},{id:"price",title:"Price",type:"Number",value:"",default:"",placeholder:"Enter price",formula:{destination:"quantity",action:function(e){if(e){var t=Math.ceil(e*o);if(t<=9999)return t}return""}},rules:{required:!0}},{id:"quantity",title:"Quantity(ml)",type:"Number",value:"",default:"",placeholder:"Enter quantity",formula:{destination:"price",action:s},rules:{required:!0}}],m=[{id:"confirm",title:"Consent",type:"text",value:"",default:"",placeholder:"Type CONFIRM to collect security deposit ",rules:{required:!0}}],h=[{id:"confirm",title:"Consent",type:"text",value:"",default:"",placeholder:"Type CONFIRM to add Welcome Offer",rules:{required:!0}}],f=[{id:"confirm",title:"Consent",type:"text",value:"",default:"",placeholder:"Type DELETE to remove user permanently ",rules:{required:!0}}],p=[{id:"name",title:"Customer Name",type:"text",value:"",default:"",readOnly:!0,placeholder:"Scan QrCode",qrcode:!0,rules:{required:!0}}],b=[{id:"confirm",title:"Consent",type:"text",value:"",default:"",placeholder:"Type Collect to collect bill ",rules:{required:!0}}]},89:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(26);var r=a(34);function c(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},91:function(e,t,a){"use strict";a.d(t,"d",(function(){return c})),a.d(t,"i",(function(){return l})),a.d(t,"a",(function(){return o})),a.d(t,"f",(function(){return u})),a.d(t,"h",(function(){return i})),a.d(t,"g",(function(){return s})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return m})),a.d(t,"e",(function(){return h})),a.d(t,"j",(function(){return f}));var n=a(89),r=a(92);function c(e,t){var a=new Date(e),n=""+(a.getMonth()+1),r=""+a.getDate(),c=a.getFullYear(),l=a.getHours(),o=a.getMinutes();return l=l<=9?"0"+l:l,o=o<=9?"0"+o:o,n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),"date"===t?[c,n,r].join("-"):"custom"===t?[r,n,c].join("-"):[r,n,c].join("/")+"-"+[l,o].join(":")}function l(e){if(/[\u0080-\uffff]/.test(e))throw new Error("this needs encoding, like UTF-8");for(var t=new Uint8Array(e.length),a=e.length;a--;)t[a]=e.charCodeAt(a);return t.buffer}function o(e){var t=new Uint8Array(e.buffer),a=String.fromCharCode.apply(String,t);if(/[\u0080-\uffff]/.test(a))throw new Error("this string seems to contain (still encoded) multibytes");return a}function u(){var e=document.createElement("script");e.async=!0;e.src="https://securegw.paytm.in/merchantpgpui/checkoutjs/merchants/Sivali89602719243261.js",e.type="application/javascript",e.crossOrigin="anonymous",document.head.appendChild(e)}function i(e,t,a){var n=0,r=0,c=[];return e.forEach((function(e){-1!==(e[t]?e[t]+"":"").search(a)&&(c.push(e),n+=parseInt(e.price),r+=parseInt(e.quantity))})),[c,n,r]}function s(e,t){try{var a=e.orderId,n=e.amount,c=e.txnToken,l={root:"",flow:"DEFAULT",merchant:{name:"Sivalingam Milks",logo:r.a},data:{orderId:a,token:c,tokenType:"TXN_TOKEN",amount:n},handler:{notifyMerchant:t}};window.Paytm&&window.Paytm.CheckoutJS&&window.Paytm.CheckoutJS.init(l).then((function(){console.log("Before JS Checkout invoke"),window.Paytm.CheckoutJS.invoke()})).catch((function(e){console.log("Error => ",e)}))}catch(o){return!1}}function d(e,t,a){var n=[];return t?a.forEach((function(a){a[e]+""===t&&n.push(a)})):n=a,n}function m(e,t,a,r,c,l){var o=Object(n.a)(r);return c=[],l&&(l.role&&(o=d("role",l.role,o)),l.branchcode&&(o=d("branchcode",l.branchcode,o))),t&&a&&e?(t=new Date(t).setHours(0,0,0,0),a=new Date(a).setHours(0,0,0,0),o.forEach((function(n){var r=new Date(n[e]).setHours(0,0,0,0);r>=t&&r<=a&&c.push(n)}))):c=o,c}function h(e){try{var t=[];for(var a in e){var n=e[a];t.push({id:a,value:n,type:typeof n,default:n,title:a})}return t}catch(r){return[]}}function f(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),a=window.atob(t),n=new Uint8Array(a.length),r=0;r<a.length;++r)n[r]=a.charCodeAt(r);return n}},92:function(e,t,a){"use strict";t.a=a.p+"static/media/logo.ec169ce3.png"},99:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return u}));var n=a(2),r=a(4);function c(e){return Object(r.a)(n.b,"post","transaction",e)}function l(e){return Object(r.a)(n.S,"post","saleverify",e)}function o(){return Object(r.a)(n.p,"get","milkprice")}function u(e){return Object(r.a)(n.g,"delete","deltransaction",e)}}}]);