(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[19],{141:function(e,t,a){"use strict";a.r(t);var n=a(89),r=a(12),l=a(13),o=a(20),c=a(15),i=a(14),s=a(0),u=a.n(s),m=a(19),d=a(23),h=a(32),f=a(91),p=a(85),b=(a(95),function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={details:[],allUser:[],flag:!1,filter:{branchcode:"",role:""},depositDetails:{name:"vasanth"}},n.filterRecord=n.filterRecord.bind(Object(o.a)(n)),n.handleChange=n.handleChange.bind(Object(o.a)(n)),n.handleClick=n.handleClick.bind(Object(o.a)(n)),n.generateID=n.generateID.bind(Object(o.a)(n)),n.viewDepositDetails=n.viewDepositDetails.bind(Object(o.a)(n)),n.onClose=n.onClose.bind(Object(o.a)(n)),n.initateRefund=n.initateRefund.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){Object(p.c)(this.props),Object(p.j)(this.props),this.props.dispatch(Object(h.e)())}},{key:"filterRecord",value:function(e){var t=this.state,a=t.allUser,n=t.details;n=t.flag?Object(f.c)(e,n):Object(f.c)(e,a),this.setState({details:n})}},{key:"handleChange",value:function(e,t){var a=e.target.value,n=this.state,r=n.startDate,l=n.endDate,o=n.filter;switch(t){case"role":o.role=a;break;case"branchcode":o.branchcode=a;break;case"start":r=a;break;case"end":l=a}this.setState({startDate:r,endDate:l,filter:o})}},{key:"handleClick",value:function(){var e=this.state,t=e.startDate,a=e.endDate,n=e.allUser,r=e.details,l=e.filter;r=Object(f.b)("createdAt",t,a,n,r,l),this.setState({details:r})}},{key:"generateID",value:function(e){var t="generateid?mobile=".concat(e);this.props.history.push(t)}},{key:"viewDepositDetails",value:function(e){this.props.dispatch(Object(h.i)({mobile:e}))}},{key:"onClose",value:function(){this.setState({showDepositPopup:!1,depositDetails:""}),this.props.dispatch(Object(h.b)())}},{key:"initateRefund",value:function(){var e=this.state.depositDetails;this.props.dispatch(Object(h.l)(e)),this.onClose()}},{key:"render",value:function(){var e=this,t=this.state,a=t.details,n=t.branch,r=t.startDate,l=t.endDate,o=t.filter,c=o.branchcode,i=o.role,s=t.depositDetails,m=t.showDepositPopup,d=this.props.userData.users.userInfo.role,h=Object(f.d)(new Date,"date"),p=0;return u.a.createElement("div",{className:"container-fluid form-items mt-3  mb-55"},u.a.createElement("label",{htmlFor:"sortkeyrole"},"Filter By Role:"),u.a.createElement("select",{className:"form-control",id:"sortkeyrole",value:i,onChange:function(t){return e.handleChange(t,"role")}},u.a.createElement("option",{key:"alluser",value:""}," All User"),u.a.createElement("option",{key:"salesman",value:"salesman"}," Salesman"),u.a.createElement("option",{key:"customer",value:"customer"}," Customer"),d&&"admin"===d&&u.a.createElement("option",{key:"branchmanager",value:"branchmanager"}," Branch Manager")),u.a.createElement("label",{htmlFor:"sortkeyrole"},"Filter By branchcode:"),u.a.createElement("select",{className:"form-control",id:"sortkeyrole",value:c,onChange:function(t){return e.handleChange(t,"branchcode")}},u.a.createElement("option",{key:"allbranch",value:""}," All Branch"),n&&n.length>0&&n.map((function(e){return u.a.createElement("option",{key:e,value:e},e)}))),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-12 text-center mt-2"},u.a.createElement("h6",null,"Filter Record by Date Range")),u.a.createElement("div",{className:"form-group col-md-6 col-sm-12"},u.a.createElement("label",{htmlFor:"fromDate"},"From Date :"),u.a.createElement("input",{type:"date",name:"fromDate",className:"form-control",placeholder:"from date",value:r,onChange:function(t){return e.handleChange(t,"start")},autoComplete:"off",max:h}),u.a.createElement("label",{className:"input-err text-danger"},"")),u.a.createElement("div",{className:"form-group col-md-6 col-sm-12"},u.a.createElement("label",{htmlFor:"toDate"},"To Date :"),u.a.createElement("input",{type:"date",name:"toDate",className:"form-control",placeholder:"To date",value:l,onChange:function(t){return e.handleChange(t,"end")},autoComplete:"off",max:h}),u.a.createElement("label",{className:"input-err text-danger"},"")),u.a.createElement("div",{className:"col-12 d-flex align-items-center justify-content-center"},u.a.createElement("button",{className:" btn btn-primary",onClick:this.handleClick},"Apply"))),a&&a.length>0?u.a.createElement(u.a.Fragment,null,u.a.createElement("table",null,u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"S.NO"),u.a.createElement("th",null,"DATE"),u.a.createElement("th",null,"NAME"),u.a.createElement("th",null,"MOBILE"),u.a.createElement("th",null,"ROLE"),u.a.createElement("th",null,"LOCATION"),u.a.createElement("th",null,"DEPOSIT"),"branchmanager"!==d&&u.a.createElement("th",null,"BRANCH CODE"),u.a.createElement("th",null,"GenerateId"))),u.a.createElement("tbody",null,a.map((function(t,a){return p+=t.deposit,u.a.createElement("tr",{key:t.mobile},u.a.createElement("td",null,a+1),u.a.createElement("td",null,Object(f.d)(t.createdAt,"custom")),u.a.createElement("td",null,t.name),u.a.createElement("td",null,t.mobile),u.a.createElement("td",null,t.role),u.a.createElement("td",null,u.a.createElement("a",{className:"btn btn-primary",rel:"noopener noreferrer",target:"_blank",href:"https://www.google.com/maps/search/?api=1&query=".concat(t.location)},"Map")),u.a.createElement("td",null,t.deposit>0?"admin"!==d?t.deposit:u.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.viewDepositDetails(t.mobile)}}," ",t.deposit):""),"branchmanager"!==d&&u.a.createElement("td",null,t.branchcode),"customer"===t.role&&u.a.createElement("td",null," ",u.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.generateID(t.mobile)}},"ID Gen")))})))),u.a.createElement("div",{className:"centered-items mt-2"},u.a.createElement("h6",{className:"text-success"},"Total Deposit: "+p))):u.a.createElement("div",{className:"row text-center m-0 "},"No Users Found"),m&&u.a.createElement("div",{className:"popup-overlay"},u.a.createElement("div",{className:"popup-container"},u.a.createElement("div",{className:"popup-header"},u.a.createElement("span",null,"Deposit Re-payable"),u.a.createElement("span",{onClick:this.onClose},u.a.createElement("i",{className:"fa fa-times"}))),u.a.createElement("div",{className:"popup-body"},u.a.createElement("div",{className:"customer-stmt-head"},u.a.createElement("div",{className:"col-4"},"Name"),u.a.createElement("div",{className:"col-4"},"Mobile"),u.a.createElement("div",{className:"col-4"},"Refund")),u.a.createElement("div",{className:"customer-stmt-row"},u.a.createElement("div",{className:"col-4"},s.name),u.a.createElement("div",{className:"col-4"},s._id),u.a.createElement("div",{className:"col-4"},s.refund))),u.a.createElement("div",{className:"popup-footer"},u.a.createElement("button",{className:"btn btn-danger m-2",onClick:this.onClose},"Close"),u.a.createElement("button",{className:"btn btn-success m-2",onClick:this.initateRefund},"Pay")))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){Object(p.h)(e),Object(p.j)(e);var a=e.userData.users,r=a.allUser,l=a.payableDepositDetails,o=a.message,c=a.messageCode;if((o||c)&&("DRU101"===c?(d.b.success(o),e.dispatch(Object(h.e)())):d.b.error(o),e.dispatch(Object(h.c)())),r&&JSON.stringify(t.allUser)!==JSON.stringify(r)){var i=[];return r.forEach((function(e){i.push(e.branchcode)})),{allUser:r,details:r,branch:i=Object(n.a)(new Set(i))}}return l&&JSON.stringify(l)!==JSON.stringify(t.depositDetails)?(console.log("condition"),{showDepositPopup:!0,depositDetails:l}):null}}]),a}(u.a.Component));t.default=Object(m.b)((function(e){return{userData:e}}))(b)},85:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"f",(function(){return o})),a.d(t,"i",(function(){return c})),a.d(t,"d",(function(){return i})),a.d(t,"g",(function(){return s})),a.d(t,"b",(function(){return u})),a.d(t,"e",(function(){return m})),a.d(t,"c",(function(){return d})),a.d(t,"h",(function(){return h})),a.d(t,"j",(function(){return f}));var n=a(32),r=a(86),l=function(e){return!!((e=e.trim())&&e.length>=3)&&e},o=function(e){return e>0},c=function(e){return!!e},i=function(e,t,a){return!!(e&&e.length>=t&&e.length<=a)},s=function(e){var t=new RegExp("^[6-9][0-9]{9}$");return!(!e||!t.test(e))},u=function(e){var t=new RegExp("^[a-zA-Z0-9_ .]+@[a-zA-Z0-9]+.[a-zA-Z]{2,3}$");return!(!e||!t.test(e))},m=function(e){var t=new RegExp("^[0-9]{1,2}[.][0-9]{5,16}, [0-9]{1,2}[.][0-9]{5,16}$");return!(!e||!t.test(e))},d=function(e){try{if(localStorage.getItem("token"))e.userData.users.token||e.dispatch(Object(n.t)());else e.history.push("/about")}catch(t){}},h=function(e){e.userData.users.token||(localStorage.getItem("token")||e.history.push("/about"))},f=function(e){var t=e.userData.users.userInfo,a=e.match.url,n=[];if(a&&t){var l=a.replace(/\/?\?[a-z=0-9]+/gi,"");if(l=l.replace("/",""),(n=r.b[l])&&n.length>0&&-1!==n.indexOf(t.role))return!0;e.history.push("/home")}}},86:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"j",(function(){return i})),a.d(t,"i",(function(){return s})),a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return m})),a.d(t,"h",(function(){return d})),a.d(t,"k",(function(){return h})),a.d(t,"f",(function(){return f})),a.d(t,"g",(function(){return p})),a.d(t,"e",(function(){return b}));var n={addsale:["salesman"],addwelcome:["salesman"],testsale:["admin"],emptycan:["branchmanager","salesman"],register:["salesman","branchmanager","admin","root"],collectbill:["salesman","branchmanager"],deposit:["salesman","branchmanager"],edit:["branchmanager","admin"],control:["branchmanager","admin","root"],delete:["admin","root"],view:["branchmanager","admin","root"],pending:["branchmanager","admin"],history:["customer","salesman","admin","branchmanager"],home:["customer","salesman","admin","branchmanager","root"],profile:["customer","salesman","admin","branchmanager","root"],statement:["customer","salesman","admin","branchmanager"],pstatement:["customer","salesman","admin","branchmanager"],paybill:["customer","salesman","branchmanager"],generateid:["branchmanager","admin","root"],manageuser:["branchmanager","admin","root"],payout:["admin"],salary:["salesman","branchmanager"],addbranch:["admin"],managebranch:["admin"],viewbranch:["admin"],deletebranch:["admin"],deletesales:["admin"]},r=["January","February","March","April","May","June","July","August","September","October","November","December"],l=40,o=1e3,c=o/l,i=l/o;function s(e){c=(o=1e3)/(l=e),i=l/o}function u(e){if(e&&e<=9999){var t=Math.ceil(e*i);if(t<=499)return t}return""}var m=[{id:"name",title:"Customer Name",type:"text",value:"",default:"",readOnly:!0,placeholder:"Scan QrCode",qrcode:!0},{id:"price",title:"Price",type:"Number",value:"",default:"",placeholder:"Enter price",formula:{destination:"quantity",action:function(e){if(e){var t=Math.ceil(e*c);if(t<=9999)return t}return""}},rules:{required:!0}},{id:"quantity",title:"Quantity(ml)",type:"Number",value:"",default:"",placeholder:"Enter quantity",formula:{destination:"price",action:u},rules:{required:!0}}],d=[{id:"confirm",title:"Consent",type:"text",value:"",default:"",placeholder:"Type CONFIRM to collect security deposit ",rules:{required:!0}}],h=[{id:"confirm",title:"Consent",type:"text",value:"",default:"",placeholder:"Type CONFIRM to add Welcome Offer",rules:{required:!0}}],f=[{id:"confirm",title:"Consent",type:"text",value:"",default:"",placeholder:"Type DELETE to remove user permanently ",rules:{required:!0}}],p=[{id:"name",title:"Customer Name",type:"text",value:"",default:"",readOnly:!0,placeholder:"Scan QrCode",qrcode:!0,rules:{required:!0}}],b=[{id:"confirm",title:"Consent",type:"text",value:"",default:"",placeholder:"Type Collect to collect bill ",rules:{required:!0}}]},89:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(26);var r=a(34);function l(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},91:function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"i",(function(){return o})),a.d(t,"a",(function(){return c})),a.d(t,"f",(function(){return i})),a.d(t,"h",(function(){return s})),a.d(t,"g",(function(){return u})),a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return d})),a.d(t,"e",(function(){return h})),a.d(t,"j",(function(){return f}));var n=a(89),r=a(92);function l(e,t){var a=new Date(e),n=""+(a.getMonth()+1),r=""+a.getDate(),l=a.getFullYear(),o=a.getHours(),c=a.getMinutes();return o=o<=9?"0"+o:o,c=c<=9?"0"+c:c,n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),"date"===t?[l,n,r].join("-"):"custom"===t?[r,n,l].join("-"):[r,n,l].join("/")+"-"+[o,c].join(":")}function o(e){if(/[\u0080-\uffff]/.test(e))throw new Error("this needs encoding, like UTF-8");for(var t=new Uint8Array(e.length),a=e.length;a--;)t[a]=e.charCodeAt(a);return t.buffer}function c(e){var t=new Uint8Array(e.buffer),a=String.fromCharCode.apply(String,t);if(/[\u0080-\uffff]/.test(a))throw new Error("this string seems to contain (still encoded) multibytes");return a}function i(){var e=document.createElement("script");e.async=!0;e.src="https://securegw.paytm.in/merchantpgpui/checkoutjs/merchants/Sivali89602719243261.js",e.type="application/javascript",e.crossOrigin="anonymous",document.head.appendChild(e)}function s(e,t,a){var n=0,r=0,l=[];return e.forEach((function(e){-1!==(e[t]?e[t]+"":"").search(a)&&(l.push(e),n+=parseInt(e.price),r+=parseInt(e.quantity))})),[l,n,r]}function u(e,t){try{var a=e.orderId,n=e.amount,l=e.txnToken,o={root:"",flow:"DEFAULT",merchant:{name:"Sivalingam Milks",logo:r.a},data:{orderId:a,token:l,tokenType:"TXN_TOKEN",amount:n},handler:{notifyMerchant:t}};window.Paytm&&window.Paytm.CheckoutJS&&window.Paytm.CheckoutJS.init(o).then((function(){console.log("Before JS Checkout invoke"),window.Paytm.CheckoutJS.invoke()})).catch((function(e){console.log("Error => ",e)}))}catch(c){return!1}}function m(e,t,a){var n=[];return t?a.forEach((function(a){a[e]+""===t&&n.push(a)})):n=a,n}function d(e,t,a,r,l,o){var c=Object(n.a)(r);return l=[],o&&(o.role&&(c=m("role",o.role,c)),o.branchcode&&(c=m("branchcode",o.branchcode,c))),t&&a&&e?(t=new Date(t).setHours(0,0,0,0),a=new Date(a).setHours(0,0,0,0),c.forEach((function(n){var r=new Date(n[e]).setHours(0,0,0,0);r>=t&&r<=a&&l.push(n)}))):l=c,l}function h(e){try{var t=[];for(var a in e){var n=e[a];t.push({id:a,value:n,type:typeof n,default:n,title:a})}return t}catch(r){return[]}}function f(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),a=window.atob(t),n=new Uint8Array(a.length),r=0;r<a.length;++r)n[r]=a.charCodeAt(r);return n}},92:function(e,t,a){"use strict";t.a=a.p+"static/media/logo.ec169ce3.png"},95:function(e,t,a){}}]);